<!DOCTYPE HTML>
<html>
	<head>
		<meta charset='utf-8'>
		<title>Material 1</title>
		<!--CSS-->
        <link href="style.css" type="text/css" rel="stylesheet">
        <!--JQuery-->
		<script src='http://code.jquery.com/jquery-1.11.0.min.js'></script>

		<script>
			$(document).ready(function(){

				$('#kommi').submit(function(e){
					e.preventDefault();

					var daten = { "kommentar": $('#kommentarfeld').val(),};

					$.ajax({
						type: 'POST',
						url: '/addkommentar',
						data: JSON.stringify(daten),
						contentType: 'application/json'
					}).done(function(){
						alert('Kommentar wurde hinzugefuegt.');
						$('#kommi')[0].reset();
					}).fail(function(e){
						alert('Kommentar konnte nicht hinzugefuegt werden.');
					});
				});

				$.ajax({
					type: 'GET',
					url: '/kommentar',
					contentType: 'application/json'
				}).done(function(data){
					data.forEach(function(penis){
						addRow(penis);
					});
				}).fail(function(vagina){
					alert('Fehler beim Holen der Daten. (' + JSON.stringify(vagina) + ')');
				});

				//Zeile in Tabelle einfügen/anhaengen
				function addRow(penis){
					$('#kommentartabelle').append('<tr><td>' + penis.kommentar + '</td></tr>');
				}
			});
		</script>
	</head>
	<body>

		<h1>Material 1</h1>
		<img src="http://www.fotos-hochladen.net/uploads/prsiwba200226lz4c9smo.jpg", width="60%", height="40%", border="1">
			<!--Tabelle wird erstellt-->
		<table border='1', id='kommentartabelle', name='kommentartabelle'>
			<tr>
				<th>Kommentare</th>
			</tr>
		</table>
		<br>
		<!--Formular wird erstellt-->
		<form id='kommi', name='kommi', action='/addkommentar'>
			<textarea name="kommentarfeld", id="kommentarfeld", placeholder="Füge ein eigenes Kommentar hinzu!", style="resize: none;"></textarea>
			<button type='submit', value="Kommentieren!">
		</form>

	</body>
</html>